{% load static %}
<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ØªØ³Ù„Ø³Ù„ Ø§Ù„Ù‚Ø¶ÙŠØ©</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;800&display=swap" rel="stylesheet">
  <script>
    tailwind.config = { theme: { extend: { fontFamily: { cairo: ['Cairo','sans-serif'] }}}}
  </script>
</head>
<body class="bg-[#0B0F1A] text-white font-cairo min-h-screen">
  {% include "header.html" %}
  <div class="h-[80px]"></div>

  <main class="max-w-5xl mx-auto px-4 pb-12">
    <div class="bg-[#121826] border border-white/10 rounded-3xl p-6">
      <div class="flex items-start justify-between gap-4">
        <div>
          <h1 class="text-2xl font-extrabold">ØªØ³Ù„Ø³Ù„ Ø§Ù„Ù‚Ø¶ÙŠØ©</h1>
          <div class="text-sm text-white/70 mt-1">
            Ø±Ù‚Ù… Ø§Ù„Ù‚Ø¶ÙŠØ©: <span class="text-[#D4AF37] font-bold">{{ case.case_number }}</span>
          </div>
          <div class="text-sm text-white/70 mt-1">
            Ø§Ù„Ø¹Ù†ÙˆØ§Ù†: {{ case.title }}
          </div>
        </div>
        <a href="{% url 'user_dashboard' %}" class="px-4 py-2 rounded-2xl bg-[#D4AF37] text-black font-extrabold">
          Ø±Ø¬ÙˆØ¹
        </a>
      </div>

      <div class="mt-6 space-y-3">
        {% for e in timeline %}
          <div class="rounded-2xl border border-white/10 p-4">
            <div class="flex items-center justify-between gap-3">
              <div class="font-extrabold">
                {{ e.get_stage_display }} â€” {{ e.title }}
              </div>
              <div class="text-xs text-white/60">{{ e.created_at|date:"Y-m-d H:i" }}</div>
            </div>
            {% if e.description %}
              <div class="text-sm text-white/70 mt-2 leading-7 whitespace-pre-wrap">{{ e.description }}</div>
            {% endif %}

            {% if e.stage == 'judgment' %}
              {% if e.outcome == 'win' %}
                <div class="mt-3 rounded-2xl bg-green-500/15 border border-green-400/30 p-4">
                  <div class="text-green-300 font-extrabold text-lg">Ù…Ø¨Ø±ÙˆÙƒ! ÙƒØ³Ø¨Øª Ø§Ù„Ù‚Ø¶ÙŠØ© ğŸ‰</div>
                  <div class="text-white/70 text-sm mt-1">Ø§Ù„Ù„Ù‡ ÙŠØªÙ…Ù… Ù„Ùƒ Ø¨Ø®ÙŠØ±.</div>
                </div>
              {% elif e.outcome == 'lose' %}
                <div class="mt-3 rounded-2xl bg-red-500/15 border border-red-400/30 p-4">
                  <div class="text-red-300 font-extrabold text-lg">ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø­ÙƒÙ… (Ø®Ø³Ø§Ø±Ø©)</div>
                  <div class="text-white/70 text-sm mt-1">ØªÙ‚Ø¯Ø± ØªÙ‚Ø¯Ù… Ø§Ø³ØªØ¦Ù†Ø§Ù Ø¥Ø°Ø§ ÙƒØ§Ù† Ù…ØªØ§Ø­.</div>
                </div>
              {% elif e.outcome == 'appeal' %}
                <div class="mt-3 rounded-2xl bg-yellow-500/15 border border-yellow-400/30 p-4">
                  <div class="text-yellow-200 font-extrabold text-lg">ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø­ÙƒÙ… (Ø§Ø³ØªØ¦Ù†Ø§Ù)</div>
                  <div class="text-white/70 text-sm mt-1">Ø§Ù„Ù‚Ø¶ÙŠØ© Ø§Ù„Ø¢Ù† ÙÙŠ Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø§Ø³ØªØ¦Ù†Ø§Ù.</div>
                </div>
              {% endif %}
            {% endif %}
          </div>
        {% empty %}
          <div class="text-center text-white/70 p-10">Ù„Ø§ ÙŠÙˆØ¬Ø¯ ØªØ³Ù„Ø³Ù„ Ø¨Ø¹Ø¯.</div>
        {% endfor %}
      </div>

      <div class="mt-8">
        <h2 class="text-lg font-extrabold">ØªØ­Ù„ÙŠÙ„ Ù…Ø´Ø§Ø¹Ø± Ø§Ù„Ø¹Ù…ÙŠÙ„ (Ø¢Ø®Ø± Ø§Ù„ØªØ­Ù„ÙŠÙ„Ø§Øª)</h2>
        <div class="mt-3 space-y-2">
          {% for s in client_sentiments %}
            <div class="rounded-2xl border border-white/10 p-3 text-sm text-white/80">
              <div class="flex items-center justify-between">
                <div>
                  Ø§Ù„ØªØµÙ†ÙŠÙ:
                  <span class="font-extrabold text-[#D4AF37]">{{ s.get_label_display }}</span>
                  â€” Ø§Ù„Ø¯Ø±Ø¬Ø©: {{ s.score }}
                </div>
                <div class="text-xs text-white/60">{{ s.created_at|date:"Y-m-d H:i" }}</div>
              </div>
              {% if s.source_text %}
                <div class="mt-2 text-white/60 text-xs whitespace-pre-wrap">{{ s.source_text }}</div>
              {% endif %}
            </div>
          {% empty %}
            <div class="text-white/60 text-sm">Ù„Ø§ ØªÙˆØ¬Ø¯ ØªØ­Ù„ÙŠÙ„Ø§Øª Ø¨Ø¹Ø¯.</div>
          {% endfor %}
        </div>
      </div>
    </div>
  </main>

  {% include "partials/sign_language_fixed.html" %}
</body>
</html>
